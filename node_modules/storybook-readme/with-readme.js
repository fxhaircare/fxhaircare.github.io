import React from 'react';
import addons from '@storybook/addons';
import { ADD_README_EVENT } from './constants';

var withReadme = function withReadme(readme) {
  var storyFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

  var emitAddReadme = function emitAddReadme(_ref) {
    var kind = _ref.kind,
        story = _ref.story;

    addons.getChannel().emit(ADD_README_EVENT, {
      kind: kind,
      storyName: story,
      readme: readme
    });
  };

  if (storyFn === null) {
    return function (storyFn, _ref2) {
      var kind = _ref2.kind,
          story = _ref2.story;

      emitAddReadme({ kind: kind, story: story });
      return storyFn();
    };
  } else {
    return function (_ref3) {
      var kind = _ref3.kind,
          story = _ref3.story;

      emitAddReadme({ kind: kind, story: story });
      return storyFn();
    };
  }
};

export default withReadme;